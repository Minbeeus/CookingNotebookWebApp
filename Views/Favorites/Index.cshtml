@model IEnumerable<CookingNotebookWebApp.Models.Recipe>

@{
    Layout = "~/Pages/Shared/_Layout.cshtml";
    ViewData["Title"] = "C√¥ng th·ª©c y√™u th√≠ch";
}

@section Styles {
    <link rel="stylesheet" href="~/css/Recipe/index.css" />
}

<div class="recipe-page">
    <!-- Header -->
    <div class="recipe-header">
        <h2>‚ù§Ô∏è C√¥ng th·ª©c y√™u th√≠ch</h2>
        <div class="search-bar">
            <input type="text" id="searchInput" placeholder="T√¨m c√¥ng th·ª©c y√™u th√≠ch..." />
            <button id="searchBtn">üîç</button>
        </div>
    </div>

    <div class="recipe-container">
        <!-- Sidebar b·ªô l·ªçc -->
        <aside class="recipe-sidebar">
        <div class="filter-header">
                <button id="clearFilters" class="clear-filters-btn">‚ùå Xo√° l·ªçc</button>
            </div>
            <h3>Lo·∫°i m√≥n</h3>
            <ul id="typeOfDishList">
                <li class="@(string.IsNullOrEmpty(ViewBag.TypeOfDishFilter as string) ? "active" : "")" data-value="">T·∫•t c·∫£</li>
                @foreach (var type in ViewBag.TypeOfDishes as List<string>)
                {
                    <li class="@(ViewBag.TypeOfDishFilter == type ? "active" : "")" data-value="@type">@type</li>
                }
            </ul>

            <h3>Ph∆∞∆°ng ph√°p n·∫•u</h3>
            <ul id="cookingMethodList">
                <li class="@(string.IsNullOrEmpty(ViewBag.CookingMethodFilter as string) ? "active" : "")" data-value="">T·∫•t c·∫£</li>
                @foreach (var method in ViewBag.CookingMethods as List<string>)
                {
                    <li class="@(ViewBag.CookingMethodFilter == method ? "active" : "")" data-value="@method">@method</li>
                }
            </ul>

            <h3>Th·ªùi gian</h3>
            <ul id="timeList">
                <li class="@(string.IsNullOrEmpty(ViewBag.TimeFilter as string) || ViewBag.TimeFilter == "all" ? "active" : "")" data-value="all">T·∫•t c·∫£</li>
                <li class="@(ViewBag.TimeFilter == "15" ? "active" : "")" data-value="15">D∆∞·ªõi 15 ph√∫t</li>
                <li class="@(ViewBag.TimeFilter == "30" ? "active" : "")" data-value="30">15-30 ph√∫t</li>
                <li class="@(ViewBag.TimeFilter == "60" ? "active" : "")" data-value="60">30-60 ph√∫t</li>
                <li class="@(ViewBag.TimeFilter == "120" ? "active" : "")" data-value="120">Tr√™n 60 ph√∫t</li>
            </ul>
        </aside>

        <!-- Danh s√°ch c√¥ng th·ª©c -->
        <section class="recipe-content">
            <div class="view-toggle">
                <button id="gridView" class="active">üî≤ D·∫°ng l∆∞·ªõi</button>
                <button id="listView">üìã D·∫°ng danh s√°ch</button>
            </div>

            <div class="recipe-list grid-view" id="recipeList">
                @if (Model.Any())
                {
                    @foreach (var recipe in Model)
                    {
                        <a href="@Url.Action("Details", "Recipe", new { id = recipe.RecipeId })" class="recipe-link">
                        <div class="recipe-card"
                        data-typeofdish="@recipe.Type_of_dish"
                        data-cookingmethod="@recipe.Cooking_method"
                        data-time="@(recipe.PrepTime + recipe.CookTime)"
                        data-title="@recipe.Title"
                        data-description="@recipe.Description"
                        data-image="@recipe.ImageUrl"
                        data-preptime="@recipe.PrepTime"
                        data-cooktime="@recipe.CookTime"
                        data-servings="@recipe.Servings"
                        data-author="@recipe.User?.FullName"
                                 data-totaltime="@(recipe.PrepTime + recipe.CookTime)">
                                <img src="@recipe.ImageUrl" alt="@recipe.Title" />
                                <div class="info">
                                    <h4>@recipe.Title</h4>
                                    <div class="meta">
                                        <span>‚è±Ô∏è @(recipe.PrepTime + recipe.CookTime) ph√∫t</span>
                                        <span>üë• @recipe.Servings ng∆∞·ªùi</span>
                                    </div>
                                    <p>@recipe.Description</p>
                                </div>
                            </div>
                        </a>
                    }
                }
                else
                {
                    <div class="no-favorites">
                        <div class="no-favorites-content">
                            <i class="fas fa-heart-broken" style="font-size: 4rem; color: #ddd; margin-bottom: 20px;"></i>
                            <h3 style="color: #666; margin-bottom: 10px;">Ch∆∞a c√≥ c√¥ng th·ª©c y√™u th√≠ch</h3>
                            <p style="color: #999; margin-bottom: 20px;">H√£y kh√°m ph√° v√† l∆∞u nh·ªØng c√¥ng th·ª©c b·∫°n th√≠ch!</p>
                            <a href="@Url.Action("Index", "Recipe")" class="btn btn-primary" style="padding: 10px 20px; background: #f28c38; color: white; text-decoration: none; border-radius: 6px;">Kh√°m ph√° c√¥ng th·ª©c</a>
                        </div>
                    </div>
                }
            </div>
        </section>
    </div>
</div>

@section Scripts {
    <script src="~/js/Favorites/index.js"></script>
}
